# 要件定義

## 1. アプリケーション概要

- **名称:** 仕事サポートアプリ
- **種別:** Webアプリケーション

## 2. 目的

日々の工数記録を効率化する機能に加え、ミッション管理、目標管理など、日々の業務を多角的に補助する機能を提供する。将来的には更なる機能拡張も視野に入れ、幅広い仕事のサポートを目指す。

## 3. 機能要件

### 3.1. 工数入力機能

- Googleフォームの単一のテキストエリアに、所定の書式で案件ごとのタスク情報をまとめて入力する。
- 入力テキストは、案件、タスク、見積工数、実績工数を含んだ構造的なデータとする。
- フォームから送信されたデータは、バックエンドで解析され、データベースに保存される。

### 3.2. ミッション管理機能

- Web UIを介してミッション（業務目標やタスクとは別の中長期的な指針）を登録・更新できる。

### 3.3. 目標管理機能

- Web UIを介して、目標を登録・更新できる。
- 画面での表示・操作対象は、**`end_date`が最も未来日に設定されている期間の目標群**のみとする。
- 各目標は以下の要素で構成される。
  - 期間（開始日・終了日）
  - 目標内容
  - ウェイト（重要度）
  - 進捗率

### 3.4. 週報出力機能

UI上のDatePickerで選択された日付に基づき、週報の対象となる期間を決定し、以下のレポートを出力する。

#### 3.4.1. 対象期間の定義
- 週の始まりは月曜日とする。
- レポートの対象は、選択された日付が属する週の**月曜日から金曜日まで**の5日間とする。
- （例: 2025/09/28(日) を選択した場合、対象期間は 2025/09/22(月)〜09/26(金) となる）

#### 3.4.2. ミッション出力

- Web UIで登録・更新された最新のミッション情報を整形して出力する。

#### 3.4.3. 業務状況レポート出力

- **工数サマリー:**
    - 上記で定義された対象期間内の工数データを基に、日別および案件別の業務状況を生成する。
- **目標進捗サマリー:**
    - 保存されている目標の進捗状況をレポートに含めて出力する。

### 3.5. 外部連携機能
- Googleフォームからの工数データを受け付けるためのAPIエンドポイントを提供する。
- この連携は、システムで管理される単一のAPIキーを用いて認証される。

## 4. 非機能要件

### 4.1. UI/UX
- PCおよびスマートフォンからの利用を想定し、レスポンシブデザインを採用する。

### 4.2. セキュリティ
- アプリケーションの利用にはユーザー認証（ログイン）を必須とする。
- Google Apps Scriptからのデータ連携は、システムで管理される固定APIキーを用いてリクエスト元を認証する。

### 4.3. エラーハンドリング
- アプリケーションで発生したエラーは、エラーログとしてデータベースの専用テーブルに記録する。
- クリティカルなエラーが発生した場合は、開発者へメールで通知する。

## 5. データモデル
- 「案件」は複数の「タスク」を持つことができる。
- 「工数」は各「タスク」に紐づく。

## 6. ユーザー管理
- ユーザーは自身のデータのみ閲覧・編集が可能で、他のユーザーのデータにはアクセスできない。
- 現時点では、管理者権限のような特別な役割は設けない。

## 7. その他

- （今後定義）

## 8. 出力サンプル

### 8.1. ミッション出力サンプル

```
■メンバー管理

■受託開発・社内開発の推進
案件マッチングツールのデモ運用実施中
新たに営業から10個の要望をいただいたため、
引き続き新機能の実装・改修等を進めていきます
```

### 8.2. 業務状況レポート出力サンプル

```

<日別業務状況>
09/15(月)：在宅 0h
09/16(火)：在宅 11h
09/17(水)：在宅 10h
09/18(木)：在宅 8.5h
09/19(金)：在宅 8h
平均：9.4h/日
合計：37.5h


<案件別業務状況>
■EntraID高速連携ツール（合計：34h）
>・打ち合わせ：5.75h
>・メール通知機能実装：18.5h
>・単体試験表作成：6.75h
>・単体試験：0.25h
>・検証：1h
>・インストーラー作成：0.5h
>・試験：1.25h


■その他（合計：3.5h）
>・タスク管理：0.5h
>・打ち合わせ：0.75h
>・雑務：0.25h
>・週報：0.5h
>・勤怠システム関連：1.5h


<学習状況(Udemy)>
■
>進捗率：% (+%)


<目標進捗状況>
=============================
全体
>進捗率：95.1%[285.2/300](+1.7%)
>加重達成率：89.6%[59.6,20,10](+3.6%)
>期待値：96.1% (↓6.5%)
=============================


■メイン：Udemyで20本のコースを受講し修了する[70]
>進捗率：85.2%(+5.2%)

■サブ①：仕事サポートアプリの改修[20]
>進捗率：100%【達成】

■サブ②：外部研修を5本受講する[10]
>進捗率：100%【達成】
```